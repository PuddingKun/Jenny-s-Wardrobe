<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Blouses - Jenny's Wardrobes</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ---------------- basic/reset ---------------- */
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: 'Georgia', serif; background: #fafafa; color: #333; -webkit-font-smoothing:antialiased; }
    a { color: inherit; text-decoration: none; }

    /* ---------------- top bar / nav ---------------- */
    .top-bar {
      background-color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;
      border-bottom: 1px solid #eee;
    }
    .logo { font-size: 24px; font-weight: bold; }
    .black-text { color: black; }
    .pink-text { color: #df567c; }

    .nav-icons { display: flex; align-items: center; gap: 18px; font-size: 20px; color: #333; }
    .nav-icons i { cursor: pointer; transition: transform 0.2s ease; }
    .nav-icons i:hover { transform: scale(1.2); color: #555; }

    .hamburger { display: none; font-size: 22px; cursor: pointer; background: none; border: none; }

    .nav-bar {
      background-color: #fef0e0;
      display: flex;
      justify-content: center;
      gap: 40px;
      padding: 10px 0;
      font-size: 17px;
    }

    .mobile-menu { display: none; flex-direction: column; background-color: #fef0e0; padding: 15px; }
    .mobile-menu .extra { display:flex; flex-direction:column; padding-top:10px; gap:10px; }

    /* ---------------- search ---------------- */
    .search-section { text-align: center; padding: 15px; background: #fff; border-bottom: 1px solid #eee; }
    .search-section input { padding: 6px 12px; width: 60%; max-width: 300px; border: 1px solid #ccc; border-radius: 20px; font-size: 14px; outline: none; }

    /* ---------------- product grid ---------------- */
    .blouse-products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 18px;
      padding: 20px;
    }
    .product {
      text-align: center;
      cursor: pointer;
      background: #fff;
      border-radius: 12px;
      padding: 10px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .product:hover { transform: translateY(-4px); box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
    .product img { width: 100%; aspect-ratio: 4/5; object-fit: cover; border-radius: 8px; }
    .product p { margin-top: 6px; font-size: 0.9rem; }

    /* ---------------- modal (fixed & repro-friendly) ----------------
       This is the modal CSS that fixes iPhone Safari clipping and keeps
       the image area larger (as requested). Replace previous modal rules.
    ------------------------------------------------------------------*/
    .modal {
      position: fixed;
      inset: 0;
      display: none;                /* toggled by JS */
      z-index: 9999;
      background: rgba(0,0,0,0.45);
      -webkit-overflow-scrolling: touch;
      justify-content: center;
      align-items: center;
      padding: env(safe-area-inset-top,18px) env(safe-area-inset-right,18px) env(safe-area-inset-bottom,18px) env(safe-area-inset-left,18px);
    }

    .modal-content {
      width: 92%;
      max-width: 520px;
      border-radius: 16px;
      background: #fff;
      box-shadow: 0 18px 40px rgba(0,0,0,0.25);
      overflow: hidden;            /* keeps rounded corners */
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      max-height: calc(100vh - (env(safe-area-inset-top,18px) + env(safe-area-inset-bottom,18px) + 40px));
    }

    /* === BIG IMAGE AREA === */
    .modal-image {
      position: relative;
      width: 100%;
      /* make image taller so it dominates modal top */
      height: 36vh;          /* responsive; scales with viewport height */
      max-height: 360px;     /* cap for large screens */
      min-height: 220px;     /* ensure it's tall enough on small phones */
      overflow: hidden;
      background: #eee;
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      flex: 0 0 auto;
    }

    /* image track and slides */
    .image-track {
      display: flex;
      height: 100%;
      transition: transform 0.38s ease;
    }
    .image-track img {
      width: 100%;
      height: 100%;
      object-fit: cover;      /* fill area while preserving aspect */
      display: block;
      flex-shrink: 0;
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
    }

    /* arrows overlayed on the image (visible, circular) */
    .modal-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255,255,255,0.96);
      border: none;
      width: 46px;
      height: 46px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
      z-index: 8;
    }
    .modal-arrow.left { left: 12px; }
    .modal-arrow.right { right: 12px; }
    .modal-arrow:hover { color: #df567c; }

    /* close button (keeps it on top-right of image area) */
    .close {
      position: absolute;
      top: 12px;
      right: 12px;
      z-index: 10;
      background: rgba(255,255,255,0.95);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 6px 14px rgba(0,0,0,0.18);
    }

    /* details area */
    .modal-details {
      padding: 18px 26px 6px 26px;
      text-align: center;
      overflow: auto;
    }
    .modal-details h2 {
      margin: 8px 0 6px;
      font-size: 1.32rem;
      color: #df567c;
      font-weight: 700;
    }
    .modal-details .price {
      font-weight: 700;
      margin-bottom: 8px;
      font-size: 1.05rem;
      color: #222;
    }
    .modal-details .description {
      color: #555;
      font-size: 0.98rem;
      line-height: 1.55;
      margin: 6px auto 12px;
      max-width: 86%;
    }

    /* qty + actions */
    .qty-wrapper { display:flex; align-items:center; justify-content:center; gap:10px; padding:6px 0 8px; }
    .qty-wrapper label { font-size: 0.98rem; color: #333; }
    .qty-wrapper input {
      width: 48px; border-radius: 18px; border: none;
      background: #fdeef1; color: #d46a88; padding: 6px; text-align: center;
      box-shadow: inset 0 0 4px rgba(0,0,0,0.06);
    }

    .modal-actions { display:flex; gap:14px; padding:16px 22px 22px; justify-content:space-between; align-items:center; }
    .modal-actions .add-cart, .modal-actions .buy-now {
      flex: 1; padding: 12px 14px; border-radius: 999px; border: none; font-weight:700; cursor:pointer; box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    }
    .modal-actions .add-cart { background: #fafafa; color: #111; margin-right: 8px; }
    .modal-actions .buy-now { background: #df567c; color: #fff; }

    /* small screen tweaks so nothing gets clipped and interactions are easy */
    @media (max-width: 600px) {
      .nav-bar { display: none; }
      .hamburger { display: block; }
      .modal-content { width: 95%; max-width: 420px; }
      .modal-image { height: 34vh; min-height: 180px; }
      .modal-details h2 { font-size: 1.2rem; }
      .modal-actions { padding: 12px 16px 18px; gap: 10px; }
    }

    /* utility for cart notification (unchanged) */
    .cart-notification {
      position: fixed; bottom: 20px; right: 20px; background: #fff; color: #333; border: 1px solid #ddd; padding: 15px 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); display: none; z-index: 10000;
    }
    .cart-notification p { margin: 0 0 10px; font-weight: bold; }
    .cart-notification button { background: #df567c; color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; }

  </style>
</head>
<body>

  <!-- Top Bar -->
  <div class="top-bar">
    <div class="logo">
      <span class="pink-text">Jenny’s</span>
      <span class="black-text">Wardrobe</span>
    </div>
    <div class="nav-icons">
      <i class="fas fa-shopping-cart"></i>
      <button class="hamburger" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
    </div>
  </div>

  <!-- Navigation -->
  <div class="nav-bar">
    <a href="index.html">Home</a>
    <a href="blouse.htm">Blouses</a>
    <a href="about.html">About Us</a>
    <a href="sale.html">Sale</a>
    <a href="contact.html">Contact Us</a>
  </div>
  <div class="mobile-menu" id="mobileMenu" style="display:none;">
    <a href="index.html">Home</a>
    <a href="blouse.htm">Blouses</a>
    <a href="about.html">About Us</a>
    <a href="sale.html">Sale</a>
    <a href="contact.html">Contact Us</a>
    <div class="extra">
      <a href="#"><i class="fas fa-search"></i> Search</a>
      <a href="admin.html"><i class="fas fa-user"></i> Login</a>
    </div>
  </div>

  <!-- Search -->
  <section class="search-section">
    <input type="text" id="searchBox" placeholder="Search blouses..." onkeyup="searchProducts()">
  </section>

  <!-- Products -->
  <section class="blouse-products" id="blouseProducts">

    <div class="product"
      data-name="saree Collection 1"
      data-price="n/a"
      data-description="hand crafteds saree made only for you, by  our staff, designed and finished with style for  your special occations."
      data-images="no listings available">
      <img src="no listings" alt="saree collection 1">
      <p>saree collection @1 </p>
    </div>

  </section>

  <!-- Modal -->
  <div class="modal" id="productModal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <button class="close" aria-label="Close" onclick="closeModal()">&times;</button>

      <div class="modal-image">
        <button class="modal-arrow left" onclick="changeImage(-1)" aria-label="Prev">&#10094;</button>
        <div class="image-track" id="modalImage" role="list"></div>
        <button class="modal-arrow right" onclick="changeImage(1)" aria-label="Next">&#10095;</button>
      </div>

      <div class="modal-details" id="modalDetails"></div>

      <div class="qty-wrapper">
        <label for="qty">Qty:</label>
        <input type="number" id="qty" value="1" min="1">
      </div>

      <div class="modal-actions">
        <button class="add-cart">Add to Cart</button>
        <button class="buy-now">Buy Now</button>
      </div>
    </div>
  </div>

  <div id="cartNotification" class="cart-notification">
    <p>Product added to cart!</p>
    <button onclick="window.location.href='cart.html'">View Cart</button>
  </div>

  <script>
    /* ---------------- modal + gallery JS ---------------- */
    let currentProductEl = null;
    let currentImage = 0;

    function openModalForProduct(productEl) {
      currentProductEl = productEl;
      currentImage = 0;

      const name = productEl.dataset.name;
      const price = productEl.dataset.price;
      const description = productEl.dataset.description;
      const images = productEl.dataset.images.split(",");

      const modalImage = document.getElementById("modalImage");
      modalImage.innerHTML = "";
      images.forEach(src => {
        const img = document.createElement("img");
        img.src = src.trim();
        img.alt = name;
        modalImage.appendChild(img);
      });

      // reset track position
      modalImage.style.transform = `translateX(0%)`;

      const modalDetails = document.getElementById("modalDetails");
      modalDetails.innerHTML = `
        <h2>${name}</h2>
        <p class="price">₹${price}</p>
        <p class="description">${description}</p>
      `;

      // show modal and prevent body scroll
      const modal = document.getElementById("productModal");
      modal.style.display = "flex";
      modal.setAttribute('aria-hidden','false');
      document.documentElement.style.overflow = "hidden";
      document.body.style.overflow = "hidden";
    }

    document.querySelectorAll(".product").forEach(product => {
      product.addEventListener("click", function () {
        openModalForProduct(this);
      });
    });

    function closeModal() {
      const modal = document.getElementById("productModal");
      modal.style.display = "none";
      modal.setAttribute('aria-hidden','true');
      document.documentElement.style.overflow = "";
      document.body.style.overflow = "";
      currentProductEl = null;
      currentImage = 0;
    }

    function changeImage(dir) {
      if (!currentProductEl) return;
      const modalImage = document.getElementById("modalImage");
      const images = currentProductEl.dataset.images.split(",");
      const total = images.length;
      currentImage = (currentImage + dir + total) % total;
      modalImage.style.transform = `translateX(-${currentImage * 100}%)`;
    }

    // close modal when clicking outside the content
    window.addEventListener('click', (event) => {
      const modal = document.getElementById("productModal");
      if (event.target === modal) closeModal();
    });

    // keyboard support (escape to close, left/right to change)
    window.addEventListener('keydown', (e) => {
      const modal = document.getElementById("productModal");
      if (modal.style.display === 'flex') {
        if (e.key === 'Escape') closeModal();
        if (e.key === 'ArrowLeft') changeImage(-1);
        if (e.key === 'ArrowRight') changeImage(1);
      }
    });

    /* ---------------- cart functionality (as before) ---------------- */
    function addToCart() {
      if (!currentProductEl) return;
      const qty = parseInt(document.getElementById("qty").value) || 1;
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      const product = {
        name: currentProductEl.dataset.name,
        price: currentProductEl.dataset.price,
        description: currentProductEl.dataset.description,
        image: currentProductEl.dataset.images.split(",")[0],
        qty: qty
      };

      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));

      const notif = document.getElementById("cartNotification");
      notif.style.display = "block";
      setTimeout(() => { notif.style.display = "none"; }, 3000);
    }

    function buyNow() {
      addToCart();
      window.location.href = "cart.html";
    }

    document.querySelector(".add-cart").onclick = addToCart;
    document.querySelector(".buy-now").onclick = buyNow;

    /* ---------------- small helpers (nav toggle) ---------------- */
    function toggleMenu() {
      const m = document.getElementById("mobileMenu");
      if (!m) return;
      m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
    }

    /* ---------------- ensure modal images are touch-friendly (preload track width) ---------------- */
    // When window resizes, ensure the track transform stays correct for currentImage
    window.addEventListener('resize', () => {
      const modalImage = document.getElementById("modalImage");
      if (modalImage && currentImage) {
        modalImage.style.transform = `translateX(-${currentImage * 100}%)`;
      }
    });
  </script>

</body>
</html>
