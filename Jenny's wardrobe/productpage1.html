<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jenny's Wardrobes - Blouses</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { margin: 0; font-family: 'Georgia', serif; }

    /* Top bar & Navbar */
    .offer-banner { background: #f8d660; height: 28px; display: flex; align-items: center; overflow: hidden; }
    .offer-banner span { font-size: 15px; font-weight: bold; animation: scrollText 15s linear infinite; white-space: nowrap; }
    @keyframes scrollText { 0% { transform: translateX(-100%);} 100% { transform: translateX(100%);} }

    .top-bar { background: white; display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; }
    .logo { font-size: 24px; font-weight: bold; font-family: 'Georgia', serif; }
    .pink-text { color: #df567c; } .black-text { color: black; }
    .icons { display: flex; gap: 18px; font-size: 20px; color: #333; }
    .icons i:hover { transform: scale(1.2); color: #555; cursor: pointer; }

    .nav-bar { background: #fef0e0; display: flex; justify-content: center; gap: 40px; padding: 10px 0; font-size: 17px; }
    .nav-bar a { text-decoration: none; color: black; }
    .nav-bar a:hover { color: #e08d00; }

    /* Product grid */
    .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 25px; padding: 30px; }
    .product-card { background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease; }
    .product-card:hover { transform: scale(1.03); }
    .product-card img { width: 100%; height: 260px; object-fit: cover; border-radius: 6px; }
    .product-card h3 { margin: 10px 0 5px; font-size: 16px; }
    .product-card p { font-size: 14px; color: #444; }

    /* Product modal */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; }
    .modal-content { background: white; padding: 20px; border-radius: 10px; width: 360px; text-align: center; }
    .modal-content img { width: 100%; height: 250px; object-fit: cover; border-radius: 6px; }
    .modal-content h2 { margin: 10px 0; }
    .modal-content p { margin: 5px 0; font-size: 16px; color: #333; }
    .modal-content button { margin: 10px 5px; padding: 10px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 15px; }
    .buy-btn { background: #df567c; color: white; }
    .cart-btn { background: #f8d660; color: black; }

    /* Toast notification */
    .toast { visibility: hidden; min-width: 250px; background: #333; color: white; text-align: center; border-radius: 6px; padding: 14px; position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 1000; }
    .toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
    @keyframes fadein { from { bottom: 0; opacity: 0; } to { bottom: 30px; opacity: 1; } }
    @keyframes fadeout { from { bottom: 30px; opacity: 1; } to { bottom: 0; opacity: 0; } }
    .toast a { color: #f8d660; margin-left: 10px; text-decoration: underline; }
  </style>
</head>
<body>

  <!-- Banner + Top Bar + Nav -->
  <div class="offer-banner"><span>✨ Special Offers Available – Shop Now! ✨</span></div>
  <div class="top-bar">
    <div class="logo"><span class="pink-text">Jenny’s</span> <span class="black-text">Wardrobe</span></div>
    <div class="icons">
      <i class="fas fa-search"></i>
      <i class="fas fa-shopping-cart"></i>
      <a href="admin.html"><i class="fas fa-user"></i></a>
    </div>
  </div>
  <div class="nav-bar">
    <a href="index.html">Women</a>
    <a href="#">About Us</a>
    <a href="#">Sale</a>
    <a href="#">Contact Us</a>
  </div>

  <!-- Product Grid -->
  <div class="product-grid" id="productGrid"></div>

  <!-- Product Modal -->
  <div class="modal" id="productModal">
    <div class="modal-content">
      <img id="modalImage" src="" alt="Product">
      <h2 id="modalName"></h2>
      <p id="modalPrice"></p>
      <button class="cart-btn" onclick="addToCart()">Add to Cart</button>
      <button class="buy-btn" onclick="buyNow()">Buy Now</button>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">Product added to cart <a href="cart.html">View Cart</a></div>

  <!-- Firebase -->
  <script type="module">
    // Import Supabase
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
  
    const SUPABASE_URL = 'https://plnwpmhfgbbeeuavjmyu.supabase.co'
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsbndwbWhmZ2JiZWV1YXZqbXl1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc1ODkyNDcsImV4cCI6MjA3MzE2NTI0N30.UjuL1EPtrUHJN2dQALjpz9nuM7PTDDWOE_bT3HuazEU'
  
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)
  
    let selectedProduct = null
  
    // Fetch blouse products
    async function loadProducts() {
      const { data: products, error } = await supabase.from('products').select('*')
      if (error) { console.error(error); return }
  
      const grid = document.getElementById("productGrid")
      grid.innerHTML = ""
  
      products.forEach((p) => {
        if (p.page === "blouses") {  // Only fetch products for this page
          const card = document.createElement("div")
          card.className = "product-card"
          card.innerHTML = `
            <img src="${p.imageUrl}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p>₹${p.price}</p>
          `
          card.onclick = () => openModal(p)
          grid.appendChild(card)
        }
      })
    }
  
    // Open modal
    function openModal(product) {
      selectedProduct = product
      document.getElementById("modalImage").src = product.imageUrl
      document.getElementById("modalName").innerText = product.name
      document.getElementById("modalPrice").innerText = "₹" + product.price
      document.getElementById("productModal").style.display = "flex"
    }
  
    window.onclick = function(event) {
      if (event.target == document.getElementById("productModal")) {
        document.getElementById("productModal").style.display = "none"
      }
    }
  
    // Add to Cart
    function addToCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || []
      cart.push(selectedProduct)
      localStorage.setItem("cart", JSON.stringify(cart))
      document.getElementById("productModal").style.display = "none"
      showToast()
    }
  
    // Buy Now → goes to cart
    function buyNow() {
      let cart = JSON.parse(localStorage.getItem("cart")) || []
      cart.push(selectedProduct)
      localStorage.setItem("cart", JSON.stringify(cart))
      window.location.href = "cart.html"
    }
  
    // Toast notification
    function showToast() {
      const toast = document.getElementById("toast")
      toast.className = "toast show"
      setTimeout(() => { toast.className = "toast"; }, 3000)
    }
  
    window.addToCart = addToCart
    window.buyNow = buyNow
  
    window.onload = loadProducts
  </script>
  
</body>
</html>
